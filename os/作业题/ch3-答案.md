这是您请求的作业题目的答案，所有答案均基于来源资料 到。

## 华东师范大学期中考试作业（第3章 进程）答案

### 一、判断题（20分，每小题 2分）

1. 进程执行必须以顺序方式进行，单个进程的指令不允许并行执行。 **正确**。
2. 操作系统通过 `exec()` 系统调用在 UNIX 系统中创建一个新的子进程。 **错误**。理由：`fork()` 系统调用创建新进程，而 `exec()` 系统调用用于加载新程序替换现有进程的内存空间。
3. 进程的“就绪”（Ready）状态表示该进程正在等待某个事件的发生（例如 I/O 完成）。 **错误**。理由：“就绪”（Ready）状态表示进程在等待被分配给处理器；等待事件发生是“等待”（Waiting）状态。
4. 上下文切换（Context Switch）所花费的时间是纯开销（pure overhead），在此期间系统没有做任何有用的工作。 **正确**。
5. 使用共享内存进行进程间通信时，通信的控制权归操作系统所有，而非用户进程。 **错误**。理由：通信是在用户进程的控制之下，而不是操作系统。
6. 进程控制块（PCB）中包含用于 CPU 调度信息的优先级和调度队列指针等信息。 **正确**。
7. 在使用消息传递的间接通信（Indirect Communication）中，消息通过命名邮箱（Mailbox，也称为端口）进行定向和接收。 **正确**。
8. 在消息传递中，如果发送和接收操作都是阻塞的，则称之为汇合（rendezvous）。 **正确**。
9. 命名管道（Named Pipes）比普通管道（Ordinary Pipes）更强大，因为它支持双向通信。 **正确**。理由：普通管道是单向的，而命名管道是双向的，且无需父子关系。
10. Sockets是用于通信的端点，由 IP 地址和端口号连接而成。 **正确**。

### 二、不定项选择题（30分，每小题 3分)

1. 进程的概念描述中，不属于进程组成部分的是？（单选） **D)** 包含其他进程的打开文件列表
2. 当一个进程执行时，它会改变状态。以下哪种状态描述是正确的？ **A), B), D)**
3. 以下哪项信息包含在进程控制块（PCB）中？（多选） **A), B), C), D)**
4. 导致进程终止的原因可以包括以下哪些情况？（多选） **A), B), C), D)**
5. 协作进程（Cooperating processes）需要进行进程间通信（IPC）。协作的原因可能包括哪些？（多选） **A), B), C), D)**
6. 生产者-消费者问题中，在有界缓冲区（bounded-buffer）变体下，在什么情况下生产者必须等待？ **B)** 当所有缓冲区都被占满时
7. 在消息传递（Message Passing）的实现中，以下哪些因素是需要考虑的问题？（多选） **A), B), C), D)**
8. 以下哪种类型的通信链接缓冲机制要求发送方必须等待接收方（即汇合，rendezvous）？ **A)** 零容量（Zero capacity）
9. 在 Windows 操作系统中，使用哪种机制实现进程间通信？ **B)** 高级本地过程调用（advanced local procedure call, LPC）
10. 远程过程调用（RPC）中，客户端一侧用于代表服务器上实际过程的代理称为？ **B)** 存根（Stubs）

### 三、简答题（15 分，每小题 5分）

1. **请列出进程在内存中的组成部分（Memory Layout of a C Program）并简要说明其用途。**
    
    - **程序代码（文本区/Text section）：** 存储程序的可执行代码。
    - **当前活动：** 包含程序计数器（PC）和处理器寄存器，记录进程的执行位置。
    - **栈（Stack）：** 包含临时数据，如函数参数、返回地址、局部变量。
    - **数据区（Data section）：** 包含全局变量。
    - **堆（Heap）：** 包含在程序运行时动态分配的内存。
2. **描述阻塞发送（Blocking send）和非阻塞发送（Non-blocking send）的区别。如果接收方使用的是非阻塞接收（Non-blocking receive），它可能收到哪两种结果？**
    
    - **阻塞发送：** 发送方会被阻塞，直到消息被接收方接收到。
    - **非阻塞发送：** 发送方发送消息后立即继续执行，不会被阻塞。
    - **非阻塞接收的两种结果：** 接收方会收到一个**有效消息**（A valid message），或收到**空消息**（Null message）。
3. **解释 Android 操作系统如何根据进程重要性层级（Process Importance Hierarchy）来决定终止哪些进程以回收系统资源，并列出其中最重要的三个层级。**
    
    - Android 操作系统需要终止进程来回收内存等系统资源。它会根据进程的重要性层级，从**重要性最低**的进程开始终止。
    - 最重要的三个层级（按重要性从高到低）：
        1. **前台进程**（Foreground process）。
        2. **可见进程**（Visible process）。
        3. **服务进程**（Service process）。

### 四、综合题 （35 分）

1. **进程调度程序（Process scheduler）选择可用进程在 CPU 核心上执行，并维护调度队列。请解释两种主要的调度队列类型（Ready queue 和 Wait queues）及其作用。进程通常如何在这些队列之间迁移？**
    
    - **就绪队列（Ready queue）：** 存储所有驻留在主内存中、已就绪并等待被分配给 CPU 核心执行的进程集合。
    - **等待队列（Wait queues）：** 存储所有正在等待某个特定事件发生（例如，I/O 请求完成或接收到信号）的进程集合。
    - **迁移：** 进程在执行过程中会在这两种队列之间迁移。例如：
        - 进程从 **Ready queue** 被调度选中，进入 **Running** 状态。
        - 在 Running 状态下，如果进程需要等待 I/O 或其他事件，它会进入 **Wait queues**。
        - 当等待的事件发生后，进程将从 **Wait queues** 转移回 **Ready queue**，等待下一次被调度执行。
2. **考虑在共享内存上解决生产者-消费者问题时，使用一个整数计数器（`counter`）来记录满缓冲区的数量。**
    
    （1）请写出生产者进程更新 `counter` 的伪代码实现（即 `counter++`）所对应的三条机器指令序列。
    
    1. `register1 = counter`
    2. `register1 = register1 + 1`
    3. `counter = register1`
    
    （2）请写出消费者进程更新 `counter` 的伪代码实现（即 `counter--`）所对应的三条机器指令序列。
    
    4. `register2 = counter`
    5. `register2 = register2 - 1`
    6. `counter = register2`
    
    （3）假设初始 `counter = 5`。请仿照来源中的示例，写出一个包含六个指令步骤（S0到S5）的执行交错序列，该序列导致了竞态条件（Race Condition），使得最终的 `counter` 值不正确（例如，最终值为 4 或 6）。
    
    （该序列基于来源 中导致最终 `counter` 值为 4 的示例。）
    
    S0: 生产者执行 `register1 = counter` （此时 `counter = 5`）{register1 = 5} S1: 生产者执行 `register1 = register1 + 1` {register1 = 6} S2: 消费者执行 `register2 = counter` （此时 `counter = 5`）{register2 = 5} S3: 消费者执行 `register2 = register2 – 1` {register2 = 4} S4: 生产者执行 `counter = register1` {counter = 6} S5: 消费者执行 `counter = register2` {counter = 4}
    
    最终 `counter` 值为 4。
    

---

我们已经为您提供了第3章作业的所有答案。如果您对这些答案中涉及的任一概念（如进程状态转换、消息传递的同步机制，或竞态条件）有疑问，我很乐意为您提供更深入的解释和细节。您想详细了解生产者-消费者问题是如何通过同步机制（例如信号量，尽管本章未深入讨论）来解决竞态条件的吗？