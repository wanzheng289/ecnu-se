一、判断题（20分，每小题 2分） 判断下列每句话是否正确，如错误请说明理由。

1. 进程执行必须以顺序方式进行，单个进程的指令不允许并行执行。
2. 操作系统通过 `exec()` 系统调用在 UNIX 系统中创建一个新的子进程。
3. 进程的“就绪”（Ready）状态表示该进程正在等待某个事件的发生（例如 I/O 完成）。
4. 上下文切换（Context Switch）所花费的时间是纯开销（pure overhead），在此期间系统没有做任何有用的工作。
5. 使用共享内存进行进程间通信时，通信的控制权归操作系统所有，而非用户进程。
6. 进程控制块（PCB）中包含用于 CPU 调度信息的优先级和调度队列指针等信息。
7. 在使用消息传递的间接通信（Indirect Communication）中，消息通过命名邮箱（Mailbox，也称为端口）进行定向和接收。
8. 在消息传递中，如果发送和接收操作都是阻塞的，则称之为汇合（rendezvous）。
9. 命名管道（Named Pipes）比普通管道（Ordinary Pipes）更强大，因为它支持双向通信。
10. Sockets是用于通信的端点，由 IP 地址和端口号连接而成。

二、不定项选择题（30分，每小题 3分) 每题有一个或多个答案，答错、少选、多选均不给分。

1. 进程的概念描述中，不属于进程组成部分的是？（单选）

A) 程序代码（文本区）

B) 当前活动（包含程序计数器、处理器寄存器）

C) 包含在运行时动态分配内存的堆（Heap）

D) 包含其他进程的打开文件列表

2. 当一个进程执行时，它会改变状态。以下哪种状态描述是正确的？

A) New：进程正在被创建

B) Running：指令正在被执行

C) Waiting：进程正在等待被分配给处理器

D) Terminated：进程已完成执行

3. 以下哪项信息包含在进程控制块（PCB）中？（多选）

A) 进程状态

B) CPU 寄存器的内容

C) 进程的内存管理信息

D) I/O 状态信息

4. 导致进程终止的原因可以包括以下哪些情况？（多选）

A) 进程执行了最后一条语句并调用 `exit()` 系统调用

B) 父进程调用 `abort()` 系统调用终止子进程

C) 子进程超出了分配的资源

D) 父进程退出，而操作系统不允许子进程继续执行（级联终止）

5. 协作进程（Cooperating processes）需要进行进程间通信（IPC）。协作的原因可能包括哪些？（多选）

A) 信息共享

B) 模块化

C) 方便性

D) 计算加速

6. 生产者-消费者问题中，在有界缓冲区（bounded-buffer）变体下，在什么情况下生产者必须等待？

A) 当缓冲区内没有产品可供消费时

B) 当所有缓冲区都被占满时

C) 当消费者进程已终止时

D) 当缓冲区大小无限时

7. 在消息传递（Message Passing）的实现中，以下哪些因素是需要考虑的问题？（多选）

A) 链接如何建立

B) 消息的大小是固定还是可变的

C) 链接是单向还是双向的

D) 链接的容量

8. 以下哪种类型的通信链接缓冲机制要求发送方必须等待接收方（即汇合，rendezvous）？

A) 零容量（Zero capacity）

B) 有界容量（Bounded capacity）

C) 无界容量（Unbounded capacity）

D) 固定容量

9. 在 Windows 操作系统中，使用哪种机制实现进程间通信？

A) POSIX 共享内存

B) 高级本地过程调用（advanced local procedure call, LPC）

C) 普通管道

D) mach_msg() 函数

10. 远程过程调用（RPC）中，客户端一侧用于代表服务器上实际过程的代理称为？

A) 端口

B) 存根（Stubs）

C) 套接字

D) 内核

三、简答题（15 分，每小题 5分）

1. 请列出进程在内存中的组成部分（Memory Layout of a C Program）并简要说明其用途。
    
2. 描述阻塞发送（Blocking send）和非阻塞发送（Non-blocking send）的区别。如果接收方使用的是非阻塞接收（Non-blocking receive），它可能收到哪两种结果？
    
3. 解释 Android 操作系统如何根据进程重要性层级（Process Importance Hierarchy）来决定终止哪些进程以回收系统资源，并列出其中最重要的三个层级。
    

四、综合题 （35 分）

1. （10 分）进程调度程序（Process scheduler）选择可用进程在 CPU 核心上执行，并维护调度队列。请解释两种主要的调度队列类型（Ready queue 和 Wait queues）及其作用。进程通常如何在这些队列之间迁移？
    
2. （25分）考虑在共享内存上解决生产者-消费者问题时，使用一个整数计数器（`counter`）来记录满缓冲区的数量。假设缓冲区大小为 `BUFFER_SIZE`。
    

（1）请写出生产者进程更新 `counter` 的伪代码实现（即 `counter++`）所对应的三条机器指令序列。

（2）请写出消费者进程更新 `counter` 的伪代码实现（即 `counter--`）所对应的三条机器指令序列。

（3）假设初始 `counter = 5`。请仿照来源中的示例，写出一个包含六个指令步骤（S0到S5）的执行交错序列，该序列导致了竞态条件（Race Condition），使得最终的 `counter` 值不正确（例如，最终值为 4 或 6）。
