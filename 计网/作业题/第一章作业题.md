### 1-1 客户端-服务器系统的性能受两大网络特性的强烈影响：网络的带宽（即它可以传输多少位/秒）和延迟（即第一位从客户端到达服务器需要多少秒）。举一个表现出高带宽但高延迟的网络的例子。然后举一个既具有低带宽又低延迟的示例。

1. 高带宽高时延：卫星通信的带宽较高，通常在xMHz-xGHz之间，比如Ka频段的卫星通信通常用于高速互联网接入和高清卫星电视，带宽在27-40GHz左右，带宽高；但是由于卫星距离地面远，信号需要经过较长的距离才能到达，因此时延高。
2. 低带宽低时延：拨号上网的带宽较小，通常在14kbps-56kbps之间，连接速度慢；拨号上网通过本地电话线路连接，传输路径较短，因此时延低。
**标准答案：**
==一条横跨大陆的光纤链路可能有很高的带宽，但由于光在数千公里内传播的速度，延迟也会很高。类似地，卫星链路可能以兆比特/秒的速度运行，但由于向轨道发送信号并返回所需的时间，延迟也很高。
相比之下，一个56-kbps调制解调器呼叫同一栋楼内的计算机，带宽和延迟都很低。低端的本地和个人区域无线技术，如Zigbee，也是如此。==
### 1-2 除了带宽和延迟之外，还需要什么其他参数来很好地描述用于（i）数字化语音流量的网络所提供的服务质量？（ii） 视频流量？（iii） 金融交易流量？

1. 对于数字化语音传输，应该考虑抖动和丢包率等参数。比如在拨打视频通话时，如果语音传输过于卡顿，会与画面不同步或者断断续续，无法完整地传递原有的意思。
2. 对于视频传输，应该考虑抖动和丢包率等参数。如果一个视频想要呈现比较好的播放效果，流畅性是一个很关键的因素，而抖动和丢包会损失流畅性。
3. 对于金融交易数据传输，应该考虑可靠性和安全性等参数。金融交易中涉及到需要保密的数据或者与个人隐私有关的数据，如果泄露会造成损失，因此要注意可靠性和安全性。
**标准答案：**
==对于语音和视频都需要统一的传输时间，因此网络中的抖动量很重要。这可以表示为传输时间的标准差。有短延迟但大变异性实际上比稍长延迟和低变异性更差。
对于金融交易流量，可靠性和安全性非常重要。==
### 1-3 客户端-服务器系统使用卫星网络，卫星高度为 40,000 km。响应请求的最佳延迟是什么？

卫星通信分为请求阶段和响应阶段，请求阶段是数据从客户端到卫星，再从卫星到服务器；响应阶段是数据从服务器到卫星，再从卫星到客户端。因此总共是4*40000km=160000km。取光速的近似值为300000km/s，因此最佳延迟=160000km/300000km/s≈0.53s

**标准答案：**
==请求必须上下波动，响应也必须上下波动。因此，总路径长度为160,000公里。空气和真空中的光速为300,000公里/秒，所以仅传播延迟就为160,000/300,000秒，约533毫秒。==
### 1-4 点对点子网连接5台路由器。在每对路由器之间，设计人员可以放置一条高速线、一条中速线、一条低速线或无线。如果生成和检查每个拓扑需要 50 毫秒的计算机时间，那么检查所有拓扑需要多长时间？

5台路由器之间两两组对，一共是C(5,2)=10组。而每组可以选择高速线/中速线/低速线/无线这4种连接方式，所以一共有4的10次方个拓扑。生成和检查每个拓扑需要50ms=0.05s，一共需要4的十次方*0.05s=52428.8s

**标准答案：**
==将路由器称为A、B、C、D和E。 
有十个潜在的线路：AB、AC、AD、AE、BC、BD、BE、CD、CE和DE。
这些每个都有四种可能性（三种速度或不线），所以总拓扑结构数是$4^{10}$= 1, 048, 576。 
以每个100毫秒计算，检查它们全部需要104,857.6秒，或略超过29小时。==

### 1-5 一组$2^{n}-1$路由器在集中式二叉树中互连，每个树节点上都有一个路由器。路由器 i 通过向树的根发送消息来与路由器 j 通信。然后根将消息发送回 j。假设所有路由器对的可能性都相同，则推导大 n 的每条消息的平均跃点数的近似表达式。

由节点数量N=2n-1可得出树的高度h=log2N=log2(2n-1)。对于每对i节点和j节点，从i到j需要先从i节点到root节点，再从root节点到j节点，需要走hopi+hopj个跃点。那么对于平均跃点数，需要将每对i和j的hop数之和加起来，再除以总对数。从所有节点中两两匹配，一共有2*C(N,2)=2*N(N-1)/2=N(N-1)。而对所有i和j的hopi+hopj之和，hopi和hopj对称，所以可以化简为2*hopi之和。每个i会和除自身外的所有节点配对一次，所以一共配对N-1次，因此一共(N-1)*(hopi之和)。所以平均跃点数=2*平均的节点深度。而平均节点深度=从0到n的每个节点数*深度之和/总节点数。通过查阅资料可知，当h比较大时，平均节点深度近似等于h-1，而题目给出n比较大，所有h也比较大，所以将平均节点深度近似看作h-1，代入公式可得平均跃点数=2*(h-1)=2*(log2(2n-1)-1)
**答案：**
![[屏幕截图 2025-11-11 100654.png]]
$每层跳数*该层节点数量$
第n层：$\frac{2^{n-1}}{2^{n}-1}\approx0.5$
第n-1层：$\frac{2^{n-2}}{2^{n}-1}\approx0.25$
### 1-6 无连接通信和面向连接通信的主要区别是什么？举一个使用（i）无连接通信的协议的例子;（ii） 面向联系的沟通。

无连接通信和面向连接通信的主要区别是无连接通信不需要建立连接而直接发送数据，但是不能保证按照顺序到达，因此不可靠，可能会发生丢包或者顺序混乱；而面向连接通信必须先建立连接，再发送数据，能够保证按照顺序到达，因此比较可靠。比如用户数据报协议UDP是一种无连接的传输层协议，TCP是一种面向连接通信的协议。
==面向连接的通信有三个阶段。在建立阶段，会发出请求来建立连接。只有在这个阶段成功完成后，才能开始数据传输阶段并传输数据。然后进入释放阶段。
无连接通信没有这些阶段。它只是发送数据。==

### 1-7 两个网络各提供可靠的面向连接的服务。其中一个提供可靠的字节流，另一个提供可靠的消息流。这些是相同的吗？如果是这样，为什么要区分？如果没有，请举例说明它们有何不同。

提供可靠字节流和可靠消息流的两个网络并不相同。可靠字节流的单位是字节，其数据被看作是连续的字节流，无法区分包，也就是消息之间没有边界，通常用于文件传输等领域。而可靠消息流的单位是消息，其消息之间有边界，通常用于RPC调用等领域。

==消息流和字节流是不同的。在消息流中，网络会跟踪消息边界。在字节流中，它不会。例如，假设一个进程向连接写入1024字节，然后稍后写入另一个1024字节。接收者随后执行2048字节的读取操作。对于消息流，接收者将收到两个各1024字节的消息。对于字节流，消息边界不被考虑，接收者将把完整的2048字节作为一个单元接收。原本有两个独立消息的事实被丢失了。==
### 1-8 系统具有 n 层协议层次结构。应用程序生成长度为 M 字节的消息。在每一层上，都会添加一个 h 字节标头。网络带宽的多少部分被标头填充？

每一层添加一个h字节的header，一共有n层，因此总header=n*h。网络带宽的总传输数据大小=应用层数据+总header=M+n*h，其中被标头填充的部分占比为n*h/M+n*h。
==在有n层并且每层增加h个字节的情况下，每条消息的头部字节总数为hn，因此头部浪费的空间也是hn。总消息大小为M + nh，因此头部浪费的带宽比例为hn / (M + hn)。
这个估计没有考虑到可能存在的分片（一个高层消息被发送为多个低层消息）或聚合（多个高层消息被携带为一个低层消息）。如果使用分片，它将增加开销。如果使用聚合，它将降低开销。==

### 1-9 当文件在两台计算机之间传输时，可以使用两种确认策略。在第一个中，文件被切碎成数据包，这些数据包由接收方单独确认，但文件传输作为一个整体不被确认。在第二个中，数据包不会单独确认，但整个文件在到达时都会得到确认。讨论这两种方法。

①第一种确认策略：在这种策略中，文件被切碎成数据包，这些数据包由接收方单独确认，但文件传输作为一个整体不被确认，因此如果发生丢包容易立刻被检测到，并进行重新传输，但是相应地会产生比较大的开销，效率也比较低下，也就是会影响吞吐量。

②第二种确认策略：数据包不会单独确认，但整个文件在到达时都会得到确认，这样传输过程中间没有确认包，简化了控制逻辑，传输效率较高，但是如果中间发生了丢包，需要重传整个文件，因此并不适用于丢包率较高的环境。

==如果网络容易丢包，最好单独确认每一个包，这样丢失的包可以被重新传输。
如果网络非常可靠，在整个传输结束时发送一个确认可以节省带宽（但即使丢失一个包，也需要重新传输整个文件）。==

### 1-10 ping 程序允许您将测试包发送到给定位置，并查看到达和返回需要多长时间。尝试使用 ping 查看从您所在的位置到达几个已知位置需要多长时间。根据这些数据，绘制互联网上的单向传输时间作为距离的函数。最好使用大学，因为他们的服务器位置非常准确。例如，[berkeley.edu](http://berkeley.edu/) 位于加利福尼亚州伯克利;[mit.edu](http://mit.edu/) 在马萨诸塞州剑桥市;[vu.nl](http://vu.nl/) 在阿姆斯特丹;荷兰;[www.usyd.edu.au](http://www.usyd.edu.au/) 在澳大利亚悉尼;[www.uct.ac.za](http://www.uct.ac.za/) 位于南非开普敦

![[屏幕截图_2025-10-05_222605.png]]

![[屏幕截图_2025-10-05_222645.png]]

![[屏幕截图_2025-10-05_222717.png]]

![[屏幕截图_2025-10-05_223146.png]]

![[屏幕截图_2025-10-05_223213.png]]

| 网址            | avg rtt/ms | 单向/ms   |
| ------------- | ---------- | ------- |
| berkeley.edu  | 184.309    | 92.154  |
| mit.edu       | 173.831    | 86.916  |
| vu.nl         | 235.145    | 117.572 |
| www.ru.ac.za  | 336.117    | 168.058 |
| www.cam.ac.uk | 65.042     | 32.521  |

在[https://www.thedistancenow.com/](https://www.thedistancenow.com/)上查找天津到以上大学所在城市的距离

![[屏幕截图_2025-10-05_224019.png]]

![[屏幕截图_2025-10-05_224149.png]]

![[屏幕截图_2025-10-05_224423.png]]

![[屏幕截图_2025-10-05_224509.png]]

使用python绘制散点图

```Python
import matplotlib.pyplot as plt
import pandas as pd

schools = ["Cambridge", "Berkeley", "MIT", "VU", "RU"]
distance_km = [8204, 9543, 8204, 7951, 12300]
one_way_ms = [32.521, 92.154, 86.916, 117.572, 168.058]

df = pd.DataFrame({"School": schools, "Distance_km": distance_km, "OneWay_ms": one_way_ms})
print(df)

plt.figure(figsize=(8,6))
plt.scatter(distance_km, one_way_ms, color="blue", s=60)
for i, txt in enumerate(schools):
    plt.annotate(txt, (distance_km[i]+200, one_way_ms[i]+2))

plt.xlabel("Distance from Tianjin (km)")
plt.ylabel("One-way latency (ms)")
plt.title("One-way Internet Latency vs Distance")
plt.grid(True)
plt.tight_layout()
plt.show()
```

![[Figure_1.png]]