![[Pasted image 20260101195502.png]]
![[Pasted image 20260101195536.png]]
![[Pasted image 20260101195556.png]]
## 6.1
#### 在图6-6的两个部分中都有一条注释说明：“`SERVER_PORT` 的值在客户端和服务器端必须相同”。为什么这一点如此重要？
在套接字编程中，服务器通过特定的端口来监听传入的连接，客户端必须知道此端口并连接到这个端口，如果端口号不同，服务器就无法收来自客户端的连接请求，也就无法建立连接，所以客户端和服务端的端口号必须一致
<font color="#c00000">【如果客户端向服务器端口发送数据包，而服务器没有监听该端口，该数据包将无法送达服务器。】</font>
## 6.2
#### 在 Internet 文件服务器的示例程序中（图 6-6），客户端调用 `connect()` 系统调用时，除了服务器端的监听队列已满外，是否还可能因其他原因导致 `connect()` 失败？假设网络本身是完美的。
1.服务器崩溃可能导致`connect()`失败
2.如果客户端在服务器调用`listen()`前就调用`connect()`也会失败
3.如果服务器传入了不存在的ip地址或者端口号，也会导致`connect()`失败
<font color="#c00000">【如果服务器尚未执行 listen（ ） 调用，connect（ ） 可能会失败。】</font>
## 6.3
#### 在决定一个服务器是否应该始终保持运行，或是由进程服务器根据需要按需启动时，其中一个参考标准是这个服务被使用的频率。除了使用频率之外，你还能想到哪些其他标准可以用来做出这个决策？
1.服务的花销：如果服务器运行所耗费的花销较大，应该按需启动
2.开启服务所花费的时间：如果启动该服务器花费时间较长，且对服务的实时性要求较高，应该始终保持运行
3.安全性：如果服务器始终保持运行容易受到恶意攻击的话，应该选择按需启动
4.如果需要维持服务状态，应该始终保持运行，反之则应该按需启动
<font color="#c00000">【另一个标准是客户端受过程服务器技术中额外延迟的影响程度。请求服务的服务器必须被加载，并且可能需要在客户端请求得到服务之前进行初始化。】</font>
## 6.4
#### 为什么最大分组生存时间T必须足够长，以确保不仅数据包本身已经消失，而且它的确认也已经消失？
如果T不够长，旧数据包可能会在一段延迟后被主机接收，并被误认为是新数据包，造成序号上的混乱；而如果旧数据包过期但其ack未过期，也会被主机接收并认为这个ack是对之后新的数据包的响应，同样会造成连接混乱，因此需要确保最大分组生存时间足够长，以确保不仅数据包本身已经消失，而且它的确认也已经消失。
<font color="#c00000">【查看图 6-11(b)中的第二个重复数据包。当该数据包到达时，如果确认信息仍然在浮动，那将是一场灾难。】</font>
## 6.5
#### 请讨论信用机制与滑动窗口协议各自的优点和缺点。
1.信用机制
①优点：信用机制比较灵活，接收方可以动态调整剩余可接收数据的大小，能够应对接收方处理能力的变化，可以调整发送速率
②缺点：每个ack确认帧需要包含剩余信用，传输剩余信用需要花费额外的开销；而且如果ack丢失的话，发送方无法确认是否可以继续发送，对ack的依赖性较强。
2.滑动窗口协议
①优点：部分滑动窗口协议也可以动态调整发送/接收窗口的大小；当接收方窗口未满时，发送方可以连续发送帧，而不是一帧一帧发；滑动窗口协议只需维护窗口的上下限，而无需额外维护信用，并且比较容易实现超时重传机制
②缺点：滑动窗口协议需要维护窗口大小和seq等信息，并且当窗口大小固定时，接收方的调整能力较差。
<font color="#c00000">【滑动窗口更简单，因为它只需要管理一组参数（窗口边缘）。此外，它不会出现窗口增大后又减小，导致数据段到达顺序错误的问题。然而，其信用机制更加灵活，允许对缓冲进行动态管理，使其与确认机制分离。】</font>
## 6.6
#### 为什么要设计UDP？仅仅让用户进程发送原始IP数据包难道不够吗？
IP只能负责主机和主机之间的传输，不能像端口号那样区分进程，而且其校验和只检查IP头部，不具备对数据部分的校验功能。而UDP提供了端到端传输的功能，通过端口号来使个进程在同一主机上可以通过不同端口号进行通信；并且提供校验和，可以检查数据在传输中是否损坏；并且UDP提供了封装好的套接字接口，使用户不用细究底层的细节。
<font color="#c00000">【没有。IP 数据包包含 IP 地址，这些地址指定了目标机器。一旦这样的数据包到达，网络处理器如何知道该将它交给哪个进程？UDP 数据包包含目标端口。这些信息至关重要，以便它们能够被正确地传递给相应的进程。】</font>
## 6.7
#### 假设主机 Host 1 上的某个进程被分配了端口号 `p`，而主机 Host 2 上的某个进程被分配了端口号 `q`。是否可能**在同一时间**存在**两个或更多的 TCP 连接**在这两个端口之间？
不可能。每个TCP连接都通过唯一的`源ip地址+源port+目标ip地址+目标port`进行标识，而TCP不允许两个连接具有完全相同的`源ip地址+源port+目标ip地址+目标port`，因此同一对主机上的同一对端口之间不能同时存在两个或更多的TCP连接，但如果这4个数值中有任意一个不同，那么可能在同一时间存在两个或更多的TCP连接在这两个端口之间。
<font color="#c00000">【不。连接仅通过其套接字来识别。因此，(1, p)–(2, q) 是这两个端口之间唯一可能的连接。】</font>
## 6.8
#### 设一条链路的往返时延为 10 毫秒，没有发生拥塞，使用慢启动，接收窗口大小为 24 KB，最大段大小为 2 KB。需要多长时间才能发送出第一个完整窗口？
$RTT=10ms$
$size=24KB$
$MSS=2KB$
$n=\frac{size}{MSS}=12$
1.RTT=1：
cwnd=1，可发送2KB
2.RTT=2：
cwnd=2，可发送4KB
3.RTT=3：
cwnd=4，可发送8KB
4.RTT=4：
cwnd=8，可发送16KB
2+4+8+16=30KB＞24KB
$\therefore 共需4*10=40ms$
## 6.9
#### 考虑一个使用 **TCP Reno** 的连接，初始拥塞窗口大小为 **1 KB**，初始慢启动阈值为 **64 KB**。假设在拥塞避免阶段中，加性增加的步长为 **1 KB**。如果第 0 轮是第一次发送轮次，那么请问在第 8 轮时，拥塞窗口的大小是多少？
0：1KB
1：2KB
2：4KB
3：8KB
4：16KB
5：32KB
6：64KB，达到阙值
7：65KB
8：66KB
$\therefore 第8轮时，拥塞窗口的大小是66KB$
## 6.10
#### 为了解决序列号在旧数据包仍然存在时绕行的问题，可以使用 64 位序列号。然而，理论上，光纤的速率可达 75 Tbps。需要多大的数据包寿命，才能确保未来的 75 Tbps 网络即使使用 64 位序列号也不会出现包裹问题？假设每个字节都有自己的序列号，就像 TCP 一样。
$n=64$
$B=75Tbps=75*10^{12}bps$
$t=\frac{2^{64}*8}{75*10^{12}}=\frac{2^{67}}{75*10^{12}}\approx 23天$




