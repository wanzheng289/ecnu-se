### 3-1-1 The following data fragment occurs in the middle of a data stream for which the byte-stuffing algorithm described in the text is used: A B ESC C ESC FLAG FLAG D. What is the output after stuffing?  
### 以下数据片段出现在使用文本中描述的字节填充算法的数据流中间：A B ESC C ESC FLAG FLAG D填充后的输出是什么
输出：FLAG A B ESC ESC C ESC ESC ESC FLAG ESC FLAG D FLAG

### 3-1-2 You receive the following data fragment: 0110 0111 1100 1111 0111 1101. You know that the protocol uses bit stuffing. Show the data after destuffing.  
### 您将收到以下数据片段：0110 0111 1100 1111 0111 1101。你知道协议使用比特填充。显示拆装后的数据。
应删除5个连续1之后的0
0110011111<font color="#ff0000">0</font>01111011111<font color="#ff0000">0</font>1
原始数据：0110011111011110111111

### 3-2 A 12-bit Hamming code whose hexadecimal value is 0xE4F arrives at a receiver. What was the original value in hexadecimal? Assume that not more than 1 bit is in error. (p.s.: number the bits from left to right starting at bit 1)  
### 一个十六进制值为0xE4F的12位海明码到达接收者。十六进制的原始值是多少？假设错误不超过1位。（注：从第1位开始从左到右编号）
$(0xE4F)_{16}=(1110\quad0100\quad1111)_2$
$m+r=n=12$
$(12+1)\leq2^{12-m}$
$r_{min}=4$

| 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1   | 1   | 1   | 0   | 0   | 1   | 0   | 0   | 1   | 1   | 1   | 1   |
$r_1$：3 5 7 9 11
3：1
5：0
7：0
9：1
11：1
3个1→$r_1=1$→综合症=0

$r_2$：3 6 7 10 11
3：1
6：1
7：0
10：1
11：1
4个1→$r_{2}=0\neq1$→综合症=1
$r_3$：5 6 7 12
5：0
6：1
7：0
12：1
2个1→$r_{3}=0$→综合症=0

$r_4$：9 10 11 12
9：1
10：1
11：1
12：1
3个1→$r_{4}=0$→综合症=0
$r_{4}r_{3}r_{2}r_{1}=(0010)_{2}=(2)_{10}$→第2位出错，将第2位翻转
1<font color="#ff0000">1</font>10 0100 1111
~~原始值~~==正确海明码==：$(1010 0100 1111)_{2}=(0xA4F)_{16}$
==原始值：$(10101111)_2=(0xAF)_{16}$==

### 3-3 Suppose that a message 1001 1100 1010 0011 is transmitted using the Internet Checksum (4-bit word). What is the value of the checksum?  
### 假设使用 Internet 校验和（4 位字）传输消息 1001 1100 1010 0011。校验和的值是多少？
1001+1100=10101
10101+1010=11111
11111+0011=100010
回卷进位：0010+10=0100
取反=1011
校验和=$(1011)_{2}=(11)_{10}$
### 3-4  A bit stream 10011101 is transmitted using the standard CRC method described in the text. The generator polynomial is $x^3+1$. Show the actual bit string transmitted. Suppose that the third bit from the left is inverted during transmission. Show that this error is detected at the receiver’s end. Give an example of bit errors in the bit string transmitted that will not be detected by the receiver.  
### 3-4 使用文中描述的标准 CRC 方法传输比特流 10011101。生成器多项式是$x^3+1$。显示实际传输的位串。假设左起第三位在传输过程中反转。表明在接收端检测到此错误。举一个示例，说明接收器无法检测到的传输位串中的位错误。
**1.实际传输的位串**
原始数据=10011101
G(x)=1001
长度=4位→左移3位补0
10011101000÷1001，余数=100
实际传输的位串是10011101100
![[_cgi-bin_mmwebwx-bin_webwxgetmsgimg__&MsgID=6558284325382639884&skey=@crypt_443811c9_4dd2a9bd660ef18cf6a7e3c5b626da2b&mmweb_appid=wx_webfilehelper.jpg]]
**2.证明可以检测出错误**
翻转后：10<font color="#ff0000">1</font>11101100
10111101100÷1001，无法整除，余数=101
![[_cgi-bin_mmwebwx-bin_webwxgetmsgimg__&MsgID=8798183303696248769&skey=@crypt_443811c9_4dd2a9bd660ef18cf6a7e3c5b626da2b&mmweb_appid=wx_webfilehelper.jpg]]
**3.无法被检测出错误的例子**
$E(x)=(x^{3}+1)*x^{2}=x^{5}+x^{2}$可以被G(x)整除
即当第3位和第6位翻转时无法被检测
==传输的T叠加上1001==
### 3-5 In the discussion of ARQ protocol in Section 3.3.3, a scenario was outlined that resulted in the receiver accepting two copies of the same frame due to a loss of acknowledgement frame. Is it possible that a receiver may accept multiple copies of the same frame when none of the frames (message or acknowledgement) are lost?  
### 在第3.3.3节对ARQ协议的讨论中，概述了一种场景，该场景导致接收方由于丢失确认帧而接受同一帧的两个副本。当所有帧（消息或确认）都没有丢失时，接收方是否可能接受同一帧的多个副本？
不会，因为只有当接收方检测到有的帧错误或者没有收到帧时，发送方才会在等待确认超时后重传帧。即使接收方发送的ack由于延迟等原因在发送方的定时器超时后才到达发送发送方，发送方重传了该帧，接收方也可以通过帧的01序号来判断出这是重复帧而不是新帧，从而舍弃这帧，不会重复接收同一个帧的多个副本。
==会。ack可能会在发送方定时器超时后到达==
### 3-6  A channel has a bit rate of 4 kbps and a propagation delay of 20 msec. For what range of frame sizes does stop-and-wait give an efficiency of at least 50%?  
### 一个信道的比特率为 4 kbps，传播延迟为 20 毫秒。对于什么范围的帧尺寸，停-等协议的效率至少为 50%？
$B=4kbps=4*10^{3}bps$
$D=20ms=0.02s$
$Link Utilization=\frac{\frac{L}{B}}{2*D+\frac{L}{B}}=\frac{\frac{L}{4*10^{3}}}{2*0.02+\frac{L}{4*10^{3}}}=\frac{L}{160+L}\geq0.5$
$L\geq160bit$
### 3-7 A 3000-km-long T1 trunk is used to transmit 64-byte frames using protocol 5. If the propagation speed is 6 µsec / km, how many bits should the sequence numbers be?  
### 3000 km 长的 T1 中继，使用协议 5 传输 64 字节帧。如果传播速度为 6 μsec / km，则序列号应该是多少位？
$s=3000km$
$T1链路速率=1.544Mbps=1.544*10^{6}bps$
$64byte=64*8bit=512bit$
$6μs/km=6*10^{-6}s/km$
$D=6*10^{-6}*3000=0.018s$
$2D=0.036s$
$t=\frac{512}{1.544*10^{6}}\approx0.00033s$
$w=\frac{0.036}{0.00033}\approx110$
$w\leq2^k-1$
$\therefore k_{min}=7$
$\therefore 序列号应该是7位$
==另一种解法==
$w=\frac{2BDP}{L}+1=\frac{2*1.536Mbps*18ms}{64*8}+1=109$
故需要7位序号
### 3-8 In protocol 6, when a data frame arrives, a check is made to see if the sequence number differs from the one expected and no_nak is true. If both conditions hold, a NAK is sent. Otherwise, the auxiliary timer is started. Suppose that the else clause were omitted. Would this change affect the protocol’s correctness?  
### 在协议 6 中，当数据帧到达时，会进行检查，以查看序列号是否与预期的序列号不同，并且 no_nak 为真。如果这两个条件都成立，则发送 NAK。否则，辅助定时器将启动。假设省略了 else 子句。此更改会影响协议的正确性吗？
会影响，因为接收方需要等到新收到帧后将ack捎带发出，如果不启动ack计时器，并且接收方长时间没有收到新帧，那么就一直不会发ack，发送方收不到ack就会超时重发，导致效率降低、资源浪费。
==删除该行代码→死锁==

### 3-9 Frames of 1000 bits are sent over a 1-Mbps channel using a geostationary satellite whose propagation time from the earth is 270 msec. Acknowledgements are always piggybacked onto data frames. The headers are very short. Three-bit sequence numbers are used. What is the maximum achievable channel utilization for  
### 1000比特的帧通过1mbps的信道通过地球同步卫星发送，其从地球的传播时间为270毫秒。确认信息总是附在数据帧上。标题非常短。使用3位的序列号。可实现的最大信道利用率是什么
$B=1Mbps=10^{6}bps$
$L=1000bit$
$D=270ms=0.27s$
$k=3$ 
### (a) Stop-and-wait?  
$Link Utilization=\frac{\frac{L}{B}}{2*D+\frac{L}{B}}=\frac{\frac{1000}{10^{6}}}{2*0.27+\frac{1000}{10^{6}}}=\frac{1000}{541000}\approx0.002=0.2\%$
### (b) Protocol 5?  
$n=2^{k}-1=2^{3}-1=7$
 $Link Utilization=\frac{n*\frac{L}{B}}{2*D+\frac{2*L}{B}}=\frac{7*\frac{1000}{10^6}}{2*0.27+\frac{2*1000}{10^6}}=\frac{7000}{542000}\approx0.013=1.3\%$ 
### (c) Protocol 6?  
$n=2^{k-1}=2^{2}=4$
 $Link Utilization=\frac{n*\frac{L}{B}}{2*D+\frac{2*L}{B}}=\frac{4*\frac{1000}{10^6}}{2*0.27+\frac{2*1000}{10^6}}=\frac{4000}{542000}\approx0.007=0.7\%$ 


### 3-10 Compute the fraction of the bandwidth that is wasted on overhead (headers and retransmissions) for protocol 6 on a heavily loaded 50-kbps satellite channel with data frames consisting of 40 header and 3960 data bits. Assume that the signal propagation time from the earth to the satellite is 270 msec. ACK frames never occur. NAK frames are 40 bits. The error rate for data frames is 1%, and the error rate for NAK frames is negligible. The sequence numbers are 8 bits.  
### 计算在重负载的50-kbps卫星信道上，协议6在包含40个报头和3960个数据位的数据帧上浪费在开销（报头和重传）上的带宽比例。假设信号从地球到卫星的传播时间为270毫秒。ACK帧永远不会出现。NAK帧是40位的。数据帧错误率为1%，NAK帧错误率可以忽略不计。序列号是8位。
$B=50kbps=5*10^{4}bps$
$L_{header}=40bit$
$L_{data}=3960bit$
$D=270ms=0.27s$
$L_{nak}=40bit$
$error=0.01$→传输100个帧就需要重传1个帧
$n=8$
$w=2^{n-1}=128$
$\frac{40}{40+3960}=0.01$

$\frac{40+3960}{100*(40+3960)+40+3960}=\frac{4000}{100*4000+4000}=\frac{4000}{404000}\approx0.010$
$0.01+0.01=0.02$
$\therefore 浪费在开销上的带宽比例约为2\%$

