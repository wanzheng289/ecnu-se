
| 实验课程：计算机网络实践 | 年级：2024级       | 实验成绩：           |
| ------------ | -------------- | --------------- |
| 实验名称：arp     | 姓名：史紫昱         |                 |
| 实验编号：实验四     | 学号：10245101423 | 实验日期：2025.12.17 |
| 指导教师：章玥      | 组号：22          | 实验时间：2025.12.17 |
# （一）实验目的
1.学会通过Wireshark获取ARP消息
2.掌握ARP数据包结构
3.掌握ARP数据包各字段的含义
4.了解ARP协议适用领域
# （二）实验内容与实验步骤
## 一、捕获Trace
使用管理员权限打开命令行
1. 输入ipconfig /all，可以获得本地计算机的物理地址。
![[Pasted image 20251217080608.png]]
2. 输入netstat –r，可以获得本机路由表，找到默认网关的地址。
![[Pasted image 20251217080640.png]]
3. 输入arp –a，可以查看ARP cache
![[Pasted image 20251217080651.png]]
## 二、捕获Trace
使用管理员权限打开命令行
1. 启动Wireshark，在菜单栏的捕获->选项中进行设置，选择已连接的以太网，设置捕获过滤器为ARP，将混杂模式设为关闭
![[Pasted image 20251217080930.png]]
2. 点击开始
3. 输入命令 arp –d  ，清空arp存储。然后利用命令arp –a 检查是否成功清空了arp存储。
4. 然后浏览任意的网页，促使arp表更新。
5. 在wireshark中捕获了arp报文之后，使用wireshark停止捕获。
# （三）实验环境
1. 实验所使用的器件：笔记本
2. 仪器设备名称：LAPTOP-9FV2DSHF
3. 规格
①处理器：13th Gen Intel(R) Core(TM) i5-13500H (2.60 GHz)
②机带RAM：32.0 GB (31.7 GB 可用)
③系统类型：64位操作系统, 基于x64的处理器
# （四）实验过程与分析
在使用Wireshark捕获Trace时，由于未连接以太网，以太网流量为0，因此使用WLAN进行实验
![[Pasted image 20251217081045.png]]
输入arp -d和arp -a
![[Pasted image 20251217081129.png]]
浏览任意网页，使Wireshark捕获报文
![[Pasted image 20251217081826.png]]
# （五）实验结果总结
## 一、分析Wireshark捕获到的arp报文：
#### 1. 通过语句$eth.addr==01:02:03:04:05:06$的形式，在wireshark中设置过滤器，找出与自己mac地址相关的arp报文。Arp报文包括请求报文和应答报文，仔细分析两种报文的格式。
![[Pasted image 20251217082208.png]]
mac地址=8c:e9:ee:9f:d4:22
![[Pasted image 20251217082341.png]]
###### ①请求报文
![[Pasted image 20251217082747.png]]
arp报文：
- Hardware type:Ethernet(1)-链路层协议为Ethernet
- Protocol type:IPv4(0x0800)-需要解析的协议为IPv4
- Hardware size:6-MAC地址长度=6bytes
- Protocol size:4-IPv4地址长度=4bytes
- Opcode:request(1)-表示该arp报文为请求报文
- Sender MAC address:Intel_9f:d4:22(8c:e9:ee:9f:d4:22)-本机MAC地址
- Sender IP address:172.25.13.115(172.25.13.115)-本机IP地址
- Target MAC address:00:00:00_00:00:00(00:00:00:00:00:00)-目标MAC地址，由于未知，所以MAC地址为全0，需要通过广播来获取
- Target IP address:172.25.0.1(172.25.0.1)-目标IP地址
###### ②应答报文
![[Pasted image 20251217082658.png]]
arp报文：
- Hardware type:Ethernet(1)-链路层协议为Ethernet
- Protocol type:IPv4(0x0800)-需要解析的协议为IPv4
- Hardware size:6=6bytes
- Protocol size:4=4bytes
- Opcode:reply(2)-表示该arp报文为应答报文
- Sender MAC address:NewH3Techno_21:78:02(b8:d4:f7:21:78:02)-网关MAC地址
- Sender IP address:172.25.0.1(172.25.0.1)-网关IP地址
- Target MAC address:Intel_9f:d4:22(8c:e9:ee:9f:d4:22)-本机MAC地址
- Target IP address:172.25.13.115(172.25.13.115)-本机IP地址
#### 2. 画出你的计算机和本地路由间ARP的请求和应答数据包，标记出请求和应答，为每个数据包给出发送者和接受者的MAC和IP地址。
![[Pasted image 20251217092122.png]]
#### 3. 分析报文，回答问题：
###### a.什么样的操作码是用来表示一个请求？应答呢？
- opcode=1表示arp请求
- opcode=2表示arp应答
###### b.一个请求的ARP的报头有多大？应答呢？
请求arp报头
=Hardware type(2bytes)
+Protocol type(2bytes)
+Hardware size(1byte)
+Protocol size(1byte)
+Opcode(2bytes)
+Sender MAC(6bytes)
+Sender IP(4bytes)
+Target MAC(6bytes)
+Target IP(4bytes)
=28bytes
###### c.对未知目标的MAC地址的请求是什么值？
`00:00:00:00:00:00`
###### d.什么以太网类型值说明ARP是更高一层的协议？
`0x0806`
###### f.ARP应答是广播吗？
不是，ARP应答是单播。
## 二、在完成本实验后，思考下列问题：
#### 去除过滤器，我们发现还有更多的arp报文。请研究这些额外的arp报文中，有什么其他的功能作用。
- Gratuitous ARP：主要用于更新网络中其他设备的ARP缓存或检测IP冲突
- ARP Probe：主要用于进行地址冲突检测
- ARP Cache Refresh：主要用于维护ARP表，防止过期
- Proxy ARP：主要用于代替其它主机回应ARP
#### 访问网站过程中涉及到哪些协议的参与？
![[Pasted image 20251217085531.png]]
1.在浏览器中输入网页的url
`https://www.1688.com/zw/hamlet.html?scene=6&cosite=msdaohang`
网址采用HTTPS应用层协议
2.浏览器通过DNS协议解析域名，获取对应的IP地址`172.25.0.1`
3.浏览器根据IP地址和端口号，与目标服务器建立TCP连接
通过TCP协议进行三次握手建立可靠连接
4.浏览器在TCP连接上发送HTTPS请求报文，请求获取网页的内容
TCP属于运输层协议，需要使用网络层提供的服务-IP协议来进行数据包寻址&转发，IP协议使用数据链路层的服务，使用PPP点对点协议将IP数据包重新组成MAC帧进行传送
获取目标主机的MAC地址：ARP协议-询问默认网关`172.25.0.1`的MAC地址
5.服务器接收到HTTPS请求后，处理请求并返回HTTPS响应报文给浏览器
同上
6.完成传输后释放TCP连接

# （六）附录
无
